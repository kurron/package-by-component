services:
  pulsar:
    container_name: pulsar
    image: apachepulsar/pulsar:2.10.2
    networks:
      - back-tier
    ports:
      - "6650"
      - "8080"
    tmpfs:
      - /pulsar/data
    command:
      - bin/pulsar
      - standalone

  command-processor:
    container_name: command-processor
    image: command-processor:0.0.1-SNAPSHOT
    networks:
      - back-tier
    ports:
      - "8080"

volumes:
  db-data:
    driver: flocker
    driver_opts:
      size: "10GiB"

configs:
  httpd-config:
    external: true

secrets:
  server-certificate:
    external: true

networks:
  # The presence of these objects is sufficient to define them
  front-tier: {}
  back-tier: {}